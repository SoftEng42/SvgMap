(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],h=0,v=[];h<o.length;h++)r=o[h],a[r]&&v.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(v.length)v.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},a={app:0},n=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var s=i("c21b"),a=i.n(s);a.a},1242:function(t,e,i){},"231a":function(t,e,i){},4200:function(t,e,i){"use strict";var s=i("231a"),a=i.n(s);a.a},"51fa":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var s=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-sm-flex justify-content-between",attrs:{id:"app"}},[i("Canvas",{staticClass:"w-100 h-100"})],1)},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-card",{},[i("div",{staticClass:"w-100 d-flex justify-content-between"},[i("b-card",{attrs:{"min-width":"480px"}},[i("div",{staticClass:"d-flex justify-content-center mb-2"},[i("canvas",{attrs:{width:t.overview_width,height:t.overview_width,id:"overview-svg"}},[i("img",{attrs:{id:"source",src:t.url_svg_selected}})])]),i("b-card",[i("SvgTable",{on:{select_svg:t.selectSvg}})],1)],1),i("div",{staticClass:"col-sm-9"},[i("canvas",{attrs:{id:"svg-viewer",width:t.width,height:t.height},on:{mousedown:t.handleMouseDown,mouseup:t.handleMouseUp,mousemove:t.handleMouseMove,wheel:t.handleMouseWheel}},[i("img",{attrs:{id:"view_svg",src:t.url_svg_background}})])])],1)]),i("b-card",{staticClass:"text-left",staticStyle:{"margin-bottom":"0"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.current_scale,expression:"current_scale"}],staticClass:"mr-2",attrs:{type:"range",min:"80",max:"10000"},domProps:{value:t.current_scale},on:{__r:function(e){t.current_scale=e.target.value}}}),i("label",{staticClass:"text-right"},[t._v(" "+t._s(t.current_scale)+" % ")])])],1)},o=[],l=(i("6b54"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("form",[i("div",{staticClass:"custom-file"},[i("input",{ref:"fileInput",staticClass:"custom-file-input",attrs:{type:"file",id:"customFile",accept:".svg"},on:{input:t.pickFile}}),i("label",{staticClass:"custom-file-label",attrs:{for:"customFile"}},[t._v("Choose file")])])]),i("br"),t._l(t.fileList,function(e,s){return i("div",{key:s,staticClass:"svg-item mb-3 d-flex justify-content-between"},[i("b-button",{on:{click:function(i){t.selectSvg(e)}}},[i("img",{attrs:{src:e.avataPath,width:"40px",height:"100%"}}),i("label",{staticClass:"ml-2"},[t._v(" "+t._s(e.name))])]),i("div",[i("a",{staticClass:"btn btn-icon btn-light btn-sm mx-3 align-content-center pt-2",on:{click:function(i){t.deleteSvg(e)}}},[t._m(0,!0)])])],1)})],2)}),c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"svg-icon svg-icon-md svg-icon-primary"},[s("img",{attrs:{src:i("b300")}})])}],u=(i("7f7f"),i("bc3a")),h=i.n(u),v={mounted:function(){this.loadSvgs()},data:function(){return{fileList:[],uploadFile:"",fileName:""}},methods:{selectSvg:function(t){this.$emit("select_svg",t)},deleteSvg:function(t){var e=this;h()({url:"delete",params:{id:t.id},method:"POST"}).then(function(i){e.fileList=e.fileList.filter(function(e){return t.id!=e.id})}).catch(function(t){console.log(t,": Error")})},loadSvgs:function(){var t=this;h()({url:"list",method:"GET"}).then(function(e){var i=e.data.lists;t.fileList=i.map(function(t){var e={id:t.id,name:t.name,avataPath:"http://46.17.248.20:8000"+t.avata_path.substring(1),width:t.width,height:t.height};return e})}).catch(function(t){console.log(t,": Error")})},pickFile:function(){var t=this,e=this.$refs.fileInput;e.files;if(this.uploadFile=this.$refs.fileInput.files[0],"image/svg+xml"==this.uploadFile.type){var i=new FormData;i.append("file",this.uploadFile),h()({url:"upload",data:i,params:{name:this.uploadFile.name},method:"POST"}).then(function(e){var i={id:e.data.id,name:e.data.name,avataPath:"http://46.17.248.20:8000"+e.data.avata_path.substring(1),width:e.data.width,height:e.data.height};t.fileList.push(i)}).catch(function(t){})}}}},d=v,f=(i("4200"),i("2877")),_=Object(f["a"])(d,l,c,!1,null,"2d95a4a7",null);_.options.__file="SvgTable.vue";var g=_.exports,p={name:"svg-canvas",props:{},components:{SvgTable:g},watch:{total_width:function(){this.updateOverview()},total_height:function(){this.updateOverview()},current_scale:function(t){this.scale_radius=t/100,this.drawOverview()},focus:function(){this.drawOverview(),console.log(this.width,": Width")}},methods:{getStyle:function(){var t="height: "+this.height.toString()+"px;";return t},updateOverview:function(){var t=this.overview_width/this.total_width,e=this.overview_height/this.total_height,i=t<e?t:e;this.overview.setTransform(1,0,0,1,0,0),this.overview.scale(i,i);var s=0,a=0;a=t<e?(this.total_width-this.total_height)/2:(this.total_height-this.total_width)/2,this.overview.translate(s,a),this.drawOverview()},drawOverview:function(){var t=this.total_width>this.total_height?this.total_width:this.total_height;this.overview.clearRect(-t,-t,2*t,2*t);var e=document.getElementById("source");this.overview.drawImage(e,0,0),this.overview.beginPath(),this.overview.globalAlpha=.5,this.overview.fillStyle="green",this.overview.lineWidth="10",this.overview.rect(this.focus.x,this.focus.y,100*this.focus_width/this.current_scale,100*this.focus_heighht/this.current_scale),this.overview.fillRect(this.focus.x,this.focus.y,100*this.focus_width/this.current_scale,100*this.focus_heighht/this.current_scale),this.overview.stroke()},updateView:function(){var t=this,e={x:this.focus.x,y:this.focus.y,width:this.width/this.scale_radius,height:this.height/this.scale_radius},i=this;h()({url:"image",params:{id:this.id_selected,clientRect:e,scale:this.scale_radius},method:"GET"}).then(function(e){if(200==e.status){t.url_svg_background="http://46.17.248.20:8000"+e.data.url.substring(1);var s=document.getElementById("view_svg");s.addEventListener("load",function(t){i.vueCanvas.clearRect(0,0,i.vueCanvas.canvas.width,i.vueCanvas.canvas.height),i.vueCanvas.drawImage(s,0,0)})}}).catch(function(t){console.log(t,": Error")})},handleMouseDown:function(t){this.pre_focus.x=t.x,this.pre_focus.y=t.y},handleMouseUp:function(t){this.pre_focus.x=0,this.pre_focus.y=0,this.asginImage()},asginImage:function(){this.id_selected<0||(this.timer_id&&clearTimeout(this.timer_id),this.timer_id=setTimeout(this.updateView,300))},sayHi:function(){alert("Hello")},handleMouseMove:function(t){if(1==t.buttons&&!(this.id_selected<0)){if(0==this.pre_focus.x&&0==this.pre_focus.y)return this.pre_focus.x=t.x,void(this.pre_focus.y=t.y);var e={x:0,y:0};e.x=this.focus.x-(t.x-this.pre_focus.x)/this.scale_radius,e.y=this.focus.y-(t.y-this.pre_focus.y)/this.scale_radius,this.focus=e,this.pre_focus.x=t.x,this.pre_focus.y=t.y,this.asginImage()}},handleMouseWheel:function(t){var e;e=t.wheelDeltaY>0?.7*this.current_scale:1.5*this.current_scale,e>1e4&&(e=1e4),e<80&&(e=80),console.log(e),this.current_scale=Math.floor(e),this.asginImage()},selectSvg:function(t){this.id_selected=t.id,t.id>-1&&(this.total_height=t.height,this.total_width=t.width,this.url_svg_selected=t.avataPath)},getImage:function(){},uploadFile:function(){}},mounted:function(){this.height=.8*screen.availHeight,this.width=.7*screen.availWidth;var t=document.getElementById("svg-viewer"),e=t.getContext("2d");this.vueCanvas=e,t=document.getElementById("overview-svg"),e=t.getContext("2d"),this.overview=e,this.focus_heighht=this.height,this.focus_width=this.width,this.updateOverview(),this.drawOverview()},data:function(){return{overview_height:260,overview_width:260,height:100,width:100,vueCanvas:"",overview:"",scale_radius:1,current_scale:100,total_width:1e3,total_height:1e3,url_svg_selected:"",focus:{x:0,y:0},focus_width:100,focus_heighht:100,pre_focus:{x:0,y:0},id_selected:-1,url_svg_background:"",timer_id:-1}}},m=p,w=(i("a8b7"),Object(f["a"])(m,r,o,!1,null,"40e38508",null));w.options.__file="Canvas.vue";var b=w.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("h1",[t._v(t._s(t.msg))]),t._m(0),i("h3",[t._v("Installed CLI Plugins")]),t._m(1),i("h3",[t._v("Essential Links")]),t._m(2),i("h3",[t._v("Ecosystem")]),t._m(3)])},x=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("\n    For guide and recipes on how to configure / customize this project,"),i("br"),t._v("\n    check out the\n    "),i("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-cli documentation")]),t._v(".\n  ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[t._v("babel")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[t._v("eslint")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),i("li",[i("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),i("li",[i("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Community Chat")])]),i("li",[i("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),i("li",[i("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("News")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[i("li",[i("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),i("li",[i("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[t._v("vue-devtools")])]),i("li",[i("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],C={name:"HelloWorld",props:{msg:String}},j=C,k=(i("a9cf"),Object(f["a"])(j,y,x,!1,null,"9cdd53c8",null));k.options.__file="HelloWorld.vue";var O=k.exports,S={name:"app",components:{Canvas:b,HelloWorld:O},data:function(){return{svgs:[],headers:[{key:"name"}],scale_svg:100,corner_x:0,corner_y:0,scroll_number:0,mini_maptx:0}},mounted:function(){},watch:{},methods:{}},E=S,I=(i("034f"),Object(f["a"])(E,a,n,!1,null,null,null));I.options.__file="App.vue";var T=I.exports,M=i("9f7b"),P=i("2106"),F=i.n(P);i("f9e3"),i("2dd8");s["a"].use(M["a"]),s["a"].use(F.a,h.a),s["a"].config.productionTip=!1,s["a"].config.productionTip,s["a"].axios.defaults.baseURL="http://46.17.248.20:8000/api/",new s["a"]({render:function(t){return t(T)}}).$mount("#app")},a8b7:function(t,e,i){"use strict";var s=i("51fa"),a=i.n(s);a.a},a9cf:function(t,e,i){"use strict";var s=i("1242"),a=i.n(s);a.a},b300:function(t,e,i){t.exports=i.p+"img/Trash.1cbb15e6.svg"},c21b:function(t,e,i){}});
//# sourceMappingURL=app.11a9f8e1.js.map